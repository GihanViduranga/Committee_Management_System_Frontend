<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="resources/images/LogoBGRemove.png" type="image/x-icon">
    <title>Member Dashboard</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Animate.css for animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #6366f1;
            --primary-light: #818cf8;
            --primary-dark: #4f46e5;
            --secondary-color: #f8f9fc;
            --text-light: #64748b;
            --bg-color: #f1f5f9;
            --card-bg: #ffffff;
            --sidebar-bg: #ffffff;
            --navbar-bg: #ffffff;
            --hover-color: #f8fafc;
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --background-color: #f8f9fa;
            --card-background: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --primary-color: #818cf8;
            --primary-light: #a5b4fc;
            --primary-dark: #6366f1;
            --secondary-color: #2a3042;
            --text-color: #e2e8f0;
            --text-light: #94a3b8;
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --sidebar-bg: #1e293b;
            --navbar-bg: #1e293b;
            --border-color: #334155;
            --hover-color: #334155;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: var(--transition);
            min-height: 100vh;
            overflow-x: hidden;
            font-size: 0.95rem;
        }

        /* Scrollbar Styles */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-color);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
        }

        /* Sidebar Styles */
        .sidebar {
            height: 100vh;
            width: 260px;
            position: fixed;
            top: 0;
            left: 0;
            background-color: var(--sidebar-bg);
            box-shadow: var(--shadow);
            padding: 0;
            z-index: 1000;
            transition: var(--transition);
            border-radius: 0 20px 20px 0;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .sidebar-header h4 {
            color: var(--primary-color);
            font-weight: 700;
            margin: 0;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary-dark) 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .sidebar-user {
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary-light);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
            box-shadow: var(--shadow-sm);
        }

        .user-info h5 {
            margin: 0;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .user-info p {
            margin: 0;
            color: var(--text-light);
            font-size: 0.8rem;
        }

        .sidebar-nav {
            padding: 20px 0;
        }

        .nav-section {
            margin-bottom: 10px;
        }

        .nav-section-title {
            padding: 10px 25px;
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-light);
            font-weight: 600;
            letter-spacing: 1px;
        }

        .sidebar a {
            display: flex;
            align-items: center;
            padding: 12px 25px;
            color: var(--text-color);
            text-decoration: none;
            transition: var(--transition);
            border-left: 3px solid transparent;
            margin: 5px 0;
            border-radius: 0 30px 30px 0;
        }

        .sidebar a:hover {
            background-color: var(--hover-color);
            color: var(--primary-color);
        }

        .sidebar a.active {
            background-color: var(--primary-color);
            color: white;
            border-radius: 0 30px 30px 0;
            box-shadow: var(--shadow-sm);
        }

        .sidebar a i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }

        /* Main Content Styles */
        .main-content {
            margin-left: 260px;
            padding: 30px;
            transition: var(--transition);
        }

        /* Navbar Styles */
        .navbar {
            background-color: var(--navbar-bg);
            box-shadow: var(--shadow-sm);
            border-radius: 15px;
            padding: 15px 25px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .navbar-brand {
            color: var(--primary-color);
            font-weight: 700;
            font-size: 1.5rem;
            margin: 0;
        }

        .navbar-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-box {
            position: relative;
            width: 250px;
        }

        .search-box input {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border: 1px solid var(--border-color);
            border-radius: 30px;
            background-color: var(--card-bg);
            color: var(--text-color);
            transition: var(--transition);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        .navbar-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--bg-color);
            color: var(--text-color);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .navbar-icon:hover {
            background-color: var(--primary-light);
            color: white;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ef4444;
            color: white;
            font-size: 0.65rem;
            font-weight: bold;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-logout {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            box-shadow: var(--shadow-sm);
        }

        .btn-logout:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-color) 100%);
        }

        /* Card Styles */
        .welcome-card, .stats-card, .notification-card, .events-card, .payment-card {
            background-color: var(--card-bg);
            border: none;
            border-radius: 15px;
            box-shadow: var(--shadow-sm);
            padding: 25px;
            margin-bottom: 30px;
            transition: var(--transition);
        }

        .welcome-card:hover, .stats-card:hover, .notification-card:hover, .events-card:hover, .payment-card:hover {
            box-shadow: var(--shadow);
            transform: translateY(-5px);
        }

        .welcome-card {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .welcome-card::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .welcome-card::after {
            content: '';
            position: absolute;
            bottom: -80px;
            left: -80px;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .welcome-card h2 {
            font-weight: 700;
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }

        .welcome-card p {
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .stats-row {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .stats-card {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .stats-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            color: white;
            font-size: 1.5rem;
        }

        .stats-icon.purple {
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
        }

        .stats-icon.blue {
            background: linear-gradient(135deg, #93c5fd 0%, #3b82f6 100%);
        }

        .stats-icon.green {
            background: linear-gradient(135deg, #86efac 0%, #10b981 100%);
        }

        .stats-icon.amber {
            background: linear-gradient(135deg, #fcd34d 0%, #f59e0b 100%);
        }

        .stats-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
        }

        .stats-card p {
            color: var(--text-light);
            margin: 0;
            font-size: 0.9rem;
        }

        .card-title {
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: var(--text-color);
        }

        .card-title i {
            margin-right: 10px;
            color: var(--primary-color);
        }

        .card-subtitle {
            color: var(--text-light);
            font-size: 0.875rem;
            margin-bottom: 20px;
        }

        /* Notification and Event Items */
        .notification-item, .event-item {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            transition: var(--transition);
            background-color: var(--hover-color);
        }

        .notification-item:hover, .event-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-sm);
        }

        .notification-item:last-child, .event-item:last-child {
            margin-bottom: 0;
        }

        .notification-icon, .event-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            flex-shrink: 0;
        }

        .notification-icon {
            background: linear-gradient(135deg, #93c5fd 0%, #3b82f6 100%);
        }

        .event-icon.workshop {
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
        }

        .event-icon.networking {
            background: linear-gradient(135deg, #86efac 0%, #10b981 100%);
        }

        .event-icon.conference {
            background: linear-gradient(135deg, #fcd34d 0%, #f59e0b 100%);
        }

        .notification-item div strong, .event-item div strong {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .notification-item div p, .event-item div p {
            color: var(--text-light);
            font-size: 0.85rem;
            margin-bottom: 0;
        }

        .badge-notification {
            background-color: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .view-all {
            display: block;
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            background-color: var(--hover-color);
            color: var(--primary-color);
            text-decoration: none;
            margin-top: 15px;
            transition: var(--transition);
            font-weight: 500;
        }

        .view-all:hover {
            background-color: var(--primary-color);
            color: white;
        }

        /* Form Styles */
        .form-card {
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }

        .card-header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px 25px;
            border-bottom: none;
        }

        .card-header h3 {
            margin: 0;
            font-weight: 600;
        }

        .card-header p {
            margin: 5px 0 0;
            opacity: 0.8;
        }

        .form-label {
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        .form-label.required-field::after {
            content: " *";
            color: #ef4444;
        }

        .form-control, .form-select {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 12px 15px;
            border-radius: 10px;
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .input-group-text {
            background-color: var(--hover-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .invalid-feedback {
            color: #ef4444;
            font-size: 0.8rem;
        }

        /* Button Styles */
        .btn-reset {
            border: 1px solid var(--border-color);
            background-color: var(--card-bg);
            color: var(--text-color);
            border-radius: 10px;
            padding: 10px 20px;
            transition: var(--transition);
        }

        .btn-reset:hover {
            background-color: var(--hover-color);
        }

        .btn-submit {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            transition: var(--transition);
            font-weight: 500;
            box-shadow: var(--shadow-sm);
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-color) 100%);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 1000;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            transform: scale(1.1) rotate(10deg);
        }

        /* Initially hide profile and fee sections */
        #memberProfile, #memberFee {
            display: none;
            margin-left: 260px;
            padding: 30px;
        }

        /* Progress bar */
        .progress {
            height: 8px;
            border-radius: 4px;
            background-color: var(--hover-color);
            margin-top: 10px;
        }

        .progress-bar {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            border-radius: 4px;
        }

        /* Calendar */
        .calendar-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .calendar-day {
            width: calc(20% - 8px);
            aspect-ratio: 1;
            background-color: var(--hover-color);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .calendar-day:hover {
            background-color: var(--primary-light);
            color: white;
            transform: translateY(-3px);
        }

        .calendar-day.active {
            background-color: var(--primary-color);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .calendar-day .weekday {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .calendar-day .date {
            font-size: 1.2rem;
            font-weight: 600;
        }

        /* Responsive Adjustments */
        @media (max-width: 992px) {
            .sidebar {
                width: 80px;
                overflow: visible;
            }

            .sidebar-header h4, .user-info, .nav-section-title {
                display: none;
            }

            .sidebar-header {
                justify-content: center;
                padding: 15px;
            }

            .sidebar-user {
                justify-content: center;
                padding: 15px;
            }

            .sidebar a {
                justify-content: center;
                padding: 15px;
            }

            .sidebar a i {
                margin-right: 0;
                font-size: 1.2rem;
            }

            .sidebar a span {
                display: none;
            }

            .main-content, #memberProfile, #memberFee {
                margin-left: 80px;
            }

            .stats-row {
                flex-wrap: wrap;
            }

            .stats-card {
                flex: 1 1 40%;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                border-radius: 0;
            }

            .main-content, #memberProfile, #memberFee {
                margin-left: 0;
            }

            .navbar {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .navbar-actions {
                width: 100%;
                justify-content: space-between;
            }

            .search-box {
                width: 100%;
            }

            .stats-card {
                flex: 1 1 100%;
            }

            .stats-row {
                flex-direction: column;
            }
        }

        /* Animation Delays */
        .animate-delay-1 {
            animation-delay: 0.1s;
        }

        .animate-delay-2 {
            animation-delay: 0.2s;
        }

        .animate-delay-3 {
            animation-delay: 0.3s;
        }

        /* Utilities */
        .text-primary {
            color: var(--primary-color) !important;
        }



        /* User Details Container Styling */
        .user-details-container {
            margin-left: 260px;
            padding: 30px;
            transition: var(--transition);
            position: relative;
            z-index: 10; /* Lower than sidebar z-index */
            min-height: calc(100vh - 60px); /* Full height minus padding */
        }

        /* User Form Styling */
        .userForm {
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--shadow-sm);
            padding: 25px;
            margin-bottom: 30px;
            transition: var(--transition);
        }

        .userForm:hover {
            box-shadow: var(--shadow);
            transform: translateY(-5px);
        }

        .userForm fieldset {
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .userForm legend {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 1.1rem;
            padding: 0 10px;
        }

        .userForm div {
            margin-bottom: 15px;
        }

        .userForm label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        .userForm input,
        .userForm textarea,
        .userForm select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            background-color: var(--card-bg);
            color: var(--text-color);
            transition: var(--transition);
            font-size: 0.95rem;
            font-family: 'Poppins', sans-serif;
        }

        .userForm input[type="checkbox"] {
            width: auto;
            margin-left: 10px;
            transform: scale(1.2);
        }

        .userForm input:focus,
        .userForm textarea:focus,
        .userForm select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
            outline: none;
        }

        .userForm input:read-only {
            background-color: var(--hover-color);
            cursor: not-allowed;
        }

        .userForm button {
            cursor: pointer;
            padding: 12px 25px;
            border-radius: 10px;
            font-weight: 500;
            transition: var(--transition);
            margin-right: 10px;
        }

        .userForm button[type="submit"] {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            box-shadow: var(--shadow-sm);
        }

        .userForm button[type="submit"]:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-color) 100%);
        }

        .userForm button[type="button"] {
            border: 1px solid var(--border-color);
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .userForm button[type="button"]:hover {
            background-color: var(--hover-color);
        }

        /* User Table Styling */
        #userTable {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            margin-bottom: 30px;
        }

        #userTable th,
        #userTable td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        #userTable th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        #userTable tr:last-child td {
            border-bottom: none;
        }

        #userTable tr:hover td {
            background-color: var(--hover-color);
        }

        #userTable .editBtn,
        #userTable .deleteBtn,
        #userTable .viewBtn {
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            margin-right: 5px;
        }

        #userTable .editBtn {
            background-color: var(--primary-light);
            color: white;
        }

        #userTable .editBtn:hover {
            background-color: var(--primary-color);
        }

        #userTable .deleteBtn {
            background-color: #f87171;
            color: white;
        }

        #userTable .deleteBtn:hover {
            background-color: #ef4444;
        }

        #userTable .viewBtn {
            background-color: #60a5fa;
            color: white;
        }

        #userTable .viewBtn:hover {
            background-color: #3b82f6;
        }

        /* Checkbox label alignment */
        .userForm div:has(input[type="checkbox"]) {
            display: flex;
            align-items: center;
        }

        .userForm div:has(input[type="checkbox"]) label {
            margin-bottom: 0;
            flex-grow: 1;
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            .user-details-container {
                margin-left: 80px;
            }
        }

        @media (max-width: 768px) {
            .user-details-container {
                margin-left: 0;
                padding: 20px;
            }

            #userTable {
                display: block;
                overflow-x: auto;
            }

            #userTable thead,
            #userTable tbody,
            #userTable th,
            #userTable td,
            #userTable tr {
                display: block;
            }

            #userTable thead tr {
                position: absolute;
                top: -9999px;
                left: -9999px;
            }

            #userTable tr {
                margin-bottom: 15px;
                border: 1px solid var(--border-color);
                border-radius: 10px;
            }

            #userTable td {
                border: none;
                position: relative;
                padding-left: 50%;
                text-align: right;
            }

            #userTable td:before {
                content: attr(data-label);
                position: absolute;
                left: 15px;
                width: 45%;
                padding-right: 10px;
                font-weight: 600;
                text-align: left;
                color: var(--primary-color);
            }

            #userTable .actions {
                text-align: center;
            }

            #userTable .actions:before {
                display: none;
            }
        }

        .forgot-link:hover {
            color: #6e8efb;
            text-decoration: underline;
        }

        /* Submit Button */
        button {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            cursor: pointer;
            font-size: 16px;
            border-radius: 10px;
            transition: all 0.3s;
            font-weight: 500;
            font-family: 'Poppins', sans-serif;
            box-shadow: 0 4px 15px rgba(110, 142, 251, 0.3);
            position: relative;
            overflow: hidden;
            opacity: 0;
            animation: fadeIn 0.5s ease-in-out 1.6s forwards;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(110, 142, 251, 0.4);
        }

        button:active {
            transform: translateY(1px);
        }

        button:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transform: translateX(-100%);
            transition: 0.5s;
        }

        button:hover:after {
            transform: translateX(100%);
        }

        /* Register Link */
        .register-link {
            font-size: 14px;
            margin-top: 20px;
            color: rgba(255, 255, 255, 0.7);
            opacity: 0;
            animation: fadeIn 0.5s ease-in-out 2.2s forwards;
        }

        .register-link a {
            color: #6e8efb;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
        }

        .register-link a:hover {
            color: #a777e3;
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .container {
                width: 95%;
            }

            .form-section {
                padding: 30px 20px;
            }

            h1 {
                font-size: 20px;
            }
        }

        /* Keyframes */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Notification Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            max-width: 90%;
            text-align: center;
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .toast.error {
            background-color: #f44336;
        }

        .toast.success {
            background-color: #4CAF50;
        }

        .form-group {
            position: relative;
            margin-bottom: 20px;
            width: 100%;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px 12px 40px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 15px;
            color: #333;
            transition: border-color 0.3s, box-shadow 0.3s;
            outline: none;
        }

        .form-group input:focus {
            border-color: #4a90e2;
            box-shadow: 0 0 5px rgba(74, 144, 226, 0.3);
        }

        .form-group .input-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #6c757d;
        }

        .form-group input::placeholder {
            color: #999;
            opacity: 0.7;
        }

        /* Error state */
        .form-group.error input {
            border-color: #dc3545;
        }

        .form-group.error .input-icon {
            color: #dc3545;
        }

        /* Success state */
        .form-group.success input {
            border-color: #28a745;
        }

        .form-group.success .input-icon {
            color: #28a745;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 100;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .modal.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            width: 90%;
            max-width: 450px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transform: translateY(-20px);
            transition: transform 0.3s;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            color: white;
            font-size: 20px;
            font-weight: 600;
        }

        .close-modal {
            width: 50px;
            height: 50px;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: white;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .modal-btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            transition: all 0.3s;
        }

        .modal-btn-primary {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
        }

        .modal-btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .modal-btn:active {
            transform: translateY(0);
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        .otp-inputs {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }

        .otp-input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 18px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .otp-input:focus {
            outline: none;
            border-color: #6e8efb;
            box-shadow: 0 0 0 2px rgba(110, 142, 251, 0.3);
        }

        .resend-otp {
            color: #6e8efb;
            text-decoration: none;
            font-size: 14px;
            cursor: pointer;
            display: inline-block;
            margin-top: 10px;
        }

        .resend-otp:hover {
            text-decoration: underline;
        }

        .resend-otp.disabled {
            color: rgba(255, 255, 255, 0.5);
            cursor: not-allowed;
        }

        .countdown {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            margin-top: 10px;
        }

        /* Meeting Table Container */
        #meeting {
            margin-left: 260px;
            padding: 30px;
            transition: var(--transition);
        }

        .table-container {
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            padding: 20px;
        }

        /* Meeting Table Styles */
        .meeting-table {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .meeting-header {
            background-color: var(--primary-color);
            color: white;
        }

        .meeting-header th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }

        .meeting-body {
            background-color: var(--card-bg);
        }

        .meeting-body tr {
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .meeting-body tr:last-child {
            border-bottom: none;
        }

        .meeting-body tr:hover {
            background-color: var(--hover-color);
        }

        .meeting-body td {
            padding: 15px;
            font-size: 0.95rem;
        }

        /* Column-specific styles */
        .meeting-id {
            width: 10%;
            font-weight: 600;
        }

        .meeting-title {
            width: 20%;
        }

        .meeting-date {
            width: 15%;
        }

        .meeting-time {
            width: 15%;
        }

        .meeting-desc {
            width: 40%;
            color: var(--text-light);
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            #meeting {
                margin-left: 80px;
            }
        }

        @media (max-width: 768px) {
            #meeting {
                margin-left: 0;
                padding: 20px;
            }

            .table-container {
                padding: 10px;
            }

            .meeting-table {
                display: block;
                overflow-x: auto;
            }

            .meeting-header th {
                padding: 12px 8px;
                font-size: 0.8rem;
            }

            .meeting-body td {
                padding: 12px 8px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 576px) {
            .meeting-header th,
            .meeting-body td {
                padding: 10px 5px;
                font-size: 0.8rem;
            }

            .meeting-id {
                width: 15%;
            }

            .meeting-title {
                width: 25%;
            }

            .meeting-date,
            .meeting-time {
                width: 20%;
            }

            .meeting-desc {
                display: none; /* Hide description on very small screens */
            }
        }
    </style>
</head>
<body>
<!-- Sidebar -->
<div class="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-logo">
            <div class="logo-icon"><img src="resources/images/LogoBGRemove.png" style="height: 50px; width: 50px"></div>
            <h4>Members Dashboard</h4>
        </div>
    </div>

    <div class="sidebar-user profile-details">
        <div class="user-avatar"><img id="profilePic" src="resources/images/" alt="profile"></div>
        <span class="admin_name" id="admin1Name">Loading...</span>
    </div>

    <div class="sidebar-nav">
        <div class="nav-section">
            <div class="nav-section-title">Main</div>
            <a href="#" id="dashboard" class="active animate__animated animate__fadeInLeft">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" id="updateProfile" class="animate__animated animate__fadeInLeft animate-delay-1">
                <i class="fas fa-user-edit"></i>
                <span>Profile</span>
            </a>
            <a href="#" id="MeetingTbl" class="animate__animated animate__fadeInLeft animate-delay-1">
                <i class="fas fa-user-edit"></i>
                <span>Meeting</span>
            </a>
            <a href="#" id="membershipFee" class="animate__animated animate__fadeInLeft animate-delay-1">
                <i class="fas fa-credit-card"></i>
                <span>Membership Fee</span>
            </a>

            <a href="#" class="animate__animated animate__fadeInLeft animate-delay-1 forgot-link">
                <i class="fas fa-cog"></i>
                <span>Change password</span>
            </a>


        </div>

        <!-- Forgot Password Modal -->
        <div id="forgotModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Reset Password</h3>
                    <button class="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <!-- Step 1: Email Input -->
                    <div id="step1" class="step active">
                        <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 20px;">
                            Enter your email address and we'll send you an OTP to reset your password.
                        </p>
                        <div class="form-group">
                            <input type="email" id="forgotEmail" placeholder="Email Address" required>
                            <span class="input-icon"><i class="fas fa-envelope"></i></span>
                        </div>
                    </div>

                    <!-- Step 2: OTP Verification -->
                    <div id="step2" class="step">
                        <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 20px;">
                            We've sent a 6-digit OTP to your email. Please enter it below.
                        </p>
                        <div class="form-group">
                            <div class="otp-inputs">
                                <input type="text" class="otp-input" maxlength="1" data-index="1">
                                <input type="text" class="otp-input" maxlength="1" data-index="2">
                                <input type="text" class="otp-input" maxlength="1" data-index="3">
                                <input type="text" class="otp-input" maxlength="1" data-index="4">
                                <input type="text" class="otp-input" maxlength="1" data-index="5">
                                <input type="text" class="otp-input" maxlength="1" data-index="6">
                            </div>
                            <div id="otpError" style="color: #f44336; font-size: 13px; margin-top: 5px; display: none;">
                                Invalid OTP. Please try again.
                            </div>
                            <a id="resendOtp" class="resend-otp">Resend OTP</a>
                            <div id="countdown" class="countdown">Resend available in 1:00</div>
                        </div>
                    </div>

                    <!-- Step 3: New Password -->
                    <div id="step3" class="step">
                        <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 20px;">
                            Please enter your new password.
                        </p>
                        <div class="form-group">
                            <input type="password" id="newPassword" placeholder="New Password" required>
                            <span class="input-icon"><i class="fas fa-lock"></i></span>
                        </div>
                        <div class="form-group">
                            <input type="password" id="confirmPassword" placeholder="Confirm New Password" required>
                            <span class="input-icon"><i class="fas fa-lock"></i></span>
                            <div id="passwordError" style="color: #f44336; font-size: 13px; margin-top: 5px; display: none;">
                                Passwords don't match.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="prevBtn" class="modal-btn modal-btn-secondary" style="display: none;">Back</button>
                    <button id="nextBtn" class="modal-btn modal-btn-primary">Next</button>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div id="toast" class="toast"></div>




        <!--<div class="nav-section">
            <div class="nav-section-title">Resources</div>
            <a href="#" class="animate__animated animate__fadeInLeft animate-delay-2">
                <i class="fas fa-calendar-alt"></i>
                <span>Calendar</span>
            </a>
            <a href="#" class="animate__animated animate__fadeInLeft animate-delay-2">
                <i class="fas fa-users"></i>
                <span>Members</span>
            </a>
            <a href="#" class="animate__animated animate__fadeInLeft animate-delay-3">
                <i class="fas fa-file-alt"></i>
                <span>Documents</span>
            </a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Settings</div>
            <a href="#" class="animate__animated animate__fadeInLeft animate-delay-3">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
            <a href="#" class="animate__animated animate__fadeInLeft animate-delay-3">
                <i class="fas fa-question-circle"></i>
                <span>Help</span>
            </a>
        </div>-->
    </div>
</div>

<!-- Main Content -->
<div class="main-content" id="mainContent">
    <!-- Navbar -->
    <nav class="navbar">
        <h4 class="navbar-brand">Member Dashboard</h4>

        <div class="navbar-actions">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search...">
            </div>

            <!--<div class="navbar-icon">
                <i class="fas fa-bell"></i>
                <span class="notification-badge">3</span>
            </div>

            <div class="navbar-icon">
                <i class="fas fa-envelope"></i>
                <span class="notification-badge">5</span>
            </div>-->

            <button class="btn-logout" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </nav>

    <!-- Welcome Card -->
    <div class="welcome-card animate__animated animate__fadeIn">
        <h2>Welcome back, <span id="profileName">User</span>!</h2>
        <p>Your membership is active. Here's your personalized dashboard for April 13, 2025.</p>
    </div>

    <!-- Stats Cards -->
    <div class="stats-row">
        <div class="stats-card animate__animated animate__fadeInUp">
            <div class="stats-icon purple">
                <i class="fas fa-calendar-check"></i>
            </div>
            <h3>12</h3>
            <p>Upcoming Events</p>
        </div>

        <div class="stats-card animate__animated animate__fadeInUp animate-delay-1">
            <div class="stats-icon blue">
                <i class="fas fa-clock"></i>
            </div>
            <h3 id="meetingCount">Loading...</h3>
            <p>Meetings</p>
        </div>

        <div class="stats-card animate__animated animate__fadeInUp animate-delay-1">
            <div class="stats-icon blue">
                <i class="fas fa-clock"></i>
            </div>
            <h3 id="memberCount">Loading...</h3>
            <p>Members Count Of Committee</p>
        </div>
    </div>
</div>
<div class="user-details-container" id="memberDetails">
    <h1>User Details</h1>

    <!-- User Information Form -->
    <form class="userForm">
        <fieldset>
            <legend>Basic Information</legend>
            <div>
                <label for="fullName">Full Name:</label>
                <input type="text" id="fullName" name="fullName" disabled>
            </div>

            <div>
                <label for="birthday">Birthday:</label>
                <input type="date" id="birthday" name="birthday" disabled>
            </div>

            <div>
                <label for="address">Address:</label>
                <textarea id="address" name="address" rows="2" disabled></textarea>
            </div>

            <div>
                <label for="phoneNumber">Phone Number:</label>
                <input type="tel" id="phoneNumber" name="phoneNumber" disabled>
            </div>

            <div>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" disabled>
            </div>

            <div>
                <label for>Image</label>
                <!--<input type="file" id="image" name="image">-->
                <!-- Preview container (initially hidden) -->
                <div id="imagePreviewContainer" style="margin-top: 10px; display: none;">
                    <img id="imagePreview" src="#" alt="Preview" style="max-width: 200px; max-height: 200px; border-radius: 5px; border: 1px solid #ddd;">
                </div>
            </div>
        </fieldset>
    </form>

</div>
<div class="user-details-container" id="memberFee">
        <div class="form-container">
            <h1><i class="fas fa-money-bill-wave"></i> Member Fee Payment</h1>

            <form id="memberFeeForm" class="userForm">
                <div class="form-group">
                    <label for="PaymentDescription">Description</label>
                    <textarea id="PaymentDescription" name="description" placeholder="Enter payment description" required></textarea>
                </div>

                <div class="form-group">
                    <label for="date">Payment Date</label>
                    <input type="date" id="date" name="date" required>
                </div>

                <div class="form-group">
                    <label for="paymentMethod">Payment Method</label>
                    <select id="paymentMethod" name="paymentMethod" required>
                        <option value="" disabled selected>Select payment method</option>
                        <option value="Cash">Cash</option>
                        <option value="Credit Card">Credit Card</option>
                        <option value="Debit Card">Debit Card</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="price">Amount</label>
                    <div class="price-input-container">
                        <span class="currency-symbol">Rs.</span>
                        <input type="text" id="price" name="price" placeholder="Enter amount" required>
                    </div>
                </div>

                <!--<h2>User Information</h2>

                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" placeholder="Enter username" required>
                </div>-->

                <div class="buttons" >
                    <button type="button" id="savePayment" class="btn btn-primary" style="width: 200px">Submit Payment</button>
                    <button type="reset" class="btn btn-secondary" style="width: 200px">Reset</button>
                </div>
                <div style="padding: 20px; text-align: center;">
                    <button id="memberPayButton" class="pay-button">Member Pay</button>
                </div>
            </form>
        </div>
</div>

<div class="user-details-container" id="meeting">
    <div class="table-container">
        <table class="meeting-table">
            <thead class="meeting-header">
            <tr>
                <th class="meeting-id">Meeting ID</th>
                <th class="meeting-title">Title</th>
                <th class="meeting-date">Date</th>
                <th class="meeting-time">Time</th>
                <th class="meeting-desc">Description</th>
            </tr>
            </thead>
            <tbody id="meetingTable" class="meeting-body">
            <!-- More rows dynamically added here -->
            </tbody>
        </table>
    </div>
</div>
<script type="text/javascript" src="https://www.payhere.lk/lib/payhere.js"></script>
<script src="js/jquery-3.7.1.min.js"></script>
<script src="js/controller/memberDashboard.js"></script>
<script src="js/controller/profile.js"></script>
<script src="js/controller/memberProfileUpdate.js"></script>
<script src="js/controller/forget.js"></script>
<script src="js/controller/notifications.js"></script>
<script src="js/controller/memberFee.js"></script>
<script src="js/controller/memberMeeting.js"></script>
<!--<script type="text/javascript" src="https://www.payhere.lk/lib/payhere.js"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bcryptjs/2.4.3/bcrypt.min.js"></script>

<script>
    // Add event listener to the Member Pay button
    document.getElementById("memberPayButton").addEventListener("click", function() {
        // Call the function to process payment
        processMemberPayment();
    });

    // Function to process payment with PayHere
    function processMemberPayment() {
        // Payment object
        const payment = {
            sandbox: true, // Set to false in production
            merchant_id: "1230106", // Replace with your actual Payhere merchant ID
            return_url: window.location.origin + "/payment-success",
            cancel_url: window.location.origin + "/payment-cancelled",
            notify_url: "http://localhost:8080/api/v1/payment/payhere", // Replace with your actual API endpoint
            order_id: "MEMBER_" + Math.floor(Math.random() * 1000000), // Generate unique order ID
            items: "Membership Payment",
            amount: "1000.00", // Set your membership fee amount
            currency: "LKR",
            first_name: "", // You can set default values or leave empty
            last_name: "",
            email: "",
            phone: "",
            address: "",
            city: "",
            country: "Sri Lanka",
            delivery_address: "",
            delivery_city: "",
            delivery_country: "Sri Lanka",
            custom_1: "membership_payment",
            custom_2: ""
        };

        // Show the payhere.js popup
        if (typeof payhere !== 'undefined') {
            payhere.startPayment(payment);
        } else {
            console.error("Payhere.js is not loaded. Make sure to include the script in your HTML.");
            alert("Payment system is not available. Please try again later.");
        }
    }
</script>
<script>
    // Function to set the profile name from user data
    function setProfileName() {
        const token = localStorage.getItem("authToken");
        if (!token) {
            document.getElementById("profileName").textContent = "User";
            return;
        }

        // Option 1: Extract name from token if available
        try {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const payload = JSON.parse(atob(base64));

            // If name is directly in the token
            if (payload.name || payload.fullName) {
                document.getElementById("profileName").textContent = payload.name || payload.fullName;
                return;
            }

            // If we need to fetch using the email in the token
            const email = payload.email || payload.sub;
            if (email) {
                fetchUser(email, token);
            }
        } catch (error) {
            console.error("Error parsing token:", error);
            document.getElementById("profileName").textContent = "User";
        }
    }

    // Function to fetch user profile data from API
    function fetchUser(email, token) {
        $.ajax({
            url: `http://localhost:8080/api/v1/User/getUserByEmail/${email}`,
            type: 'GET',
            headers: {
                'Authorization': `Bearer ${token}`
            },
            success: function(res) {
                console.log("Response:", res);

                // Check for code 200 and data object with fullName
                if (res.code === 200 && res.data && res.data.fullName) {
                    document.getElementById("profileName").textContent = res.data.fullName;
                    console.log("Setting profile name to:", res.data.fullName);
                }
                // Also check if the data is directly in the response
                else if (res.fullName) {
                    document.getElementById("profileName").textContent = res.fullName;
                    console.log("Setting profile name to (direct):", res.fullName);
                }
                // If we can't find a name, use a default value
                else {
                    console.warn("Could not find user name in response:", res);
                    document.getElementById("profileName").textContent = "User";
                }
            },
            error: function(xhr, status, error) {
                console.error("Error fetching user profile:", error);
                // Keep default "User" text
            }
        });
    }

    // Call the function when the page loads
    $(document).ready(function() {
        setProfileName();
    });
</script>

</body>
</html>